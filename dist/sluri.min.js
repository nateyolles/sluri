/*! sluri - v0.4.0 - 2016-08-03
* https://github.com/nateyolles/sluri
* Copyright (c) 2016 Nate Yolles; Licensed Apache-2.0 */
!function(a,b){"use strict";"function"==typeof define&&define.amd?define(b):"object"==typeof module&&module.exports?module.exports=b():a.slURI=b()}(this,function(){"use strict";function a(a){var b,c,e=[];if(a){b=(d+a).replace("?",""),c=b.split("&");for(var f=0;f<c.length;f++){var g=c[f].split("=");e.push({key:g[0],value:g[1]||d})}}this.toString=function(){for(var a=[],b=0;b<e.length;b++)a.push(e[b].key+"="+e[b].value);return a.length>0?a.join("&"):d},this.toLocaleString=function(){return this.toString()},this.has=function(a){for(var b=0;b<e.length;b++)if(e[b].key===a)return!0;return!1},this.get=function(a){for(var b=0;b<e.length;b++)if(e[b].key===a)return e[b].value;return null},this.getAll=function(a){for(var b=[],c=0;c<e.length;c++)e[c].key===a&&b.push(e[c].value);return b},this.delete=function(a){for(var b=0;b<e.length;b++)e[b].key===a&&e.splice(b,1)},this.append=function(a,b){e.push({key:a,value:b})},this.set=function(a,b){for(var c=0,d=0;d<e.length;d++)e[d].key===a&&(c?e.splice(d,1):e[d].value=b,c++);0===c&&this.append(a,b)},this.keys=function(){for(var a=[],b=0;b<e.length;b++)a.push(e[b].key);return a},this.values=function(){for(var a=[],b=0;b<e.length;b++)a.push(e[b].value);return a}}function b(a){var b=[];a&&(b=a.split(".")),this.toString=function(){return b.join(".")},this.toLocaleString=function(){return this.toString()},this.has=function(a){return b.indexOf(a)!==-1},this.append=function(a){b.push(a)},this.delete=function(a){var c=b.indexOf(a);c!==-1&&b.splice(c,1)},this.values=function(){return b}}var c=1,d="",e="Failed to construct 'URL': Invalid URL",f=function(g,h){function i(a){return/^\w+:\/\//.test(a)}function j(a){return a instanceof f||"undefined"!=typeof Location&&a instanceof Location||"undefined"!=typeof HTMLAnchorElement&&a instanceof HTMLAnchorElement||"undefined"!=typeof URL&&a instanceof URL}function k(a){for(var b=a%256,c=3;c>0;c--)a=Math.floor(a/256),b=a%256+"."+b;return b}function l(a){var b,c="/",d="/",e="",f="",g="";return a&&(a=""+a,0!==a.indexOf("/")&&(a="/"+a),b=a.split("."),d=b[0],e=b.slice(1,b.length-1).join("."),f=b[b.length-1].split("/")[0],b.length>=2?(g=b[b.length-1].split("/").slice(1).join("/"),g=g?"/"+g:"",c=d+"."+(e&&e+".")+f):(b=a.split("/"),c=b.length>2?b[1]:a)),{pathname:c,resourcePath:d,selectorString:e,extension:f,suffix:g}}function m(a){var b,c,d,e,f,g,h,i,j,k,m,n;return b=new RegExp(/^(?:(?:(([^:\/#\?]+:)?(?:(?:\/\/)(?:(?:(?:([^:@\/#\?]+)(?:\:([^:@\/#\?]*))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/),c=b.exec(a),d=c[1]||"",e=c[2]||"",f=c[3]||"",g=c[4]||"",h=c[6]||"",i=c[7]||"",j=c[8]||"",k=c[9]||"",m=c[10]||"",n=l(j),{protocol:e,username:f,password:g,hostname:h,port:i,origin:d,pathname:n.pathname,resourcePath:n.resourcePath,selectorString:n.selectorString,extension:n.extension,suffix:n.suffix,search:k,hash:m}}function n(a){A.protocol=a.protocol,A.username=a.username,A.password=a.password,A.hostname=a.hostname,A.port=a.port,A.resourcePath=a.resourcePath,v=a.pathname,A.selectorString=a.selectorString,A.suffix=a.suffix,A.search=a.search,A.hash=a.hash}function o(){var a,b;if("string"==typeof g?0===g.indexOf("/")?h&&(j(h)?a=h.origin:(b=m(h),a=b.hostname&&b.origin),a&&(g=a+g,p=m(g))):i(g)&&(p=m(g)):j(g)&&(p=m(g.href)),!p)throw new TypeError(e)}var p,q,r,s,t,u,v,w,x,y,z,A=this;if(!(this instanceof f))throw new TypeError("Failed to construct 'slURI': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");if(arguments.length<c)throw new TypeError("Failed to construct 'URL': "+c+" argument required, but only "+arguments.length+" present.");Object.defineProperties(this,{protocol:{enumerable:!0,configurable:!0,get:function(){return q||d},set:function(a){a&&/^[A-Za-z-]+:?$/.test(a)&&(q=":"===a.substr(-1)?a:a+":")}},username:{enumerable:!0,configurable:!0,get:function(){return r||d},set:function(a){r=d+a}},password:{enumerable:!0,configurable:!0,get:function(){return s||d},set:function(a){s=d+a}},hostname:{enumerable:!0,configurable:!0,get:function(){return t||d},set:function(a){a&&(t=isNaN(a)?a.split(":")[0]:k(a))}},host:{enumerable:!0,configurable:!0,get:function(){var a=t||d;return u&&(a+=":"+u),a},set:function(a){if(a){var b=a.split(":"),c=b[0],d=b[1];this.hostname=c,d&&(this.port=d)}}},port:{enumerable:!0,configurable:!0,get:function(){return u||d},set:function(a){null!==a&&void 0!==a&&(a===d?u=a:("number"==typeof a||/^\d+(\.\d+)?$/.test(a))&&(u=d+parseInt(a,10)))}},origin:{enumerable:!0,configurable:!0,get:function(){return this.protocol+"//"+this.host},set:function(){}},pathname:{enumerable:!0,configurable:!0,get:function(){return v||"/"},set:function(a){var b;b=l(a),v=b.pathname,this.selectorString=b.selectorString,b.pathname&&b.pathname.indexOf("/")===-1&&(this.suffix="")}},resourcePath:{enumerable:!0,configurable:!0,get:function(){return this.pathname.split(".")[0]},set:function(){}},selectorString:{enumerable:!0,configurable:!0,get:function(){return this.selectors.values()?this.selectors.values().join("."):d},set:function(a){null!==a&&void 0!==a&&(this.selectors=new b(a))}},selectors:{enumerable:!0,configurable:!0,get:function(){return w},set:function(a){a instanceof b&&(w=a)}},extension:{enumerable:!0,configurable:!0,get:function(){return this.pathname.indexOf(".")===-1?d:this.pathname.substr(this.pathname.lastIndexOf(".")+1)},set:function(a){a&&this.pathname&&this.pathname.indexOf(".")!==-1&&(this.pathname=this.pathname.substr(0,this.pathname.lastIndexOf(".")+1)+a)}},suffix:{enumerable:!0,configurable:!0,get:function(){return x},set:function(a){null!==a&&void 0!==a&&(x=a)}},search:{enumerable:!0,configurable:!0,get:function(){var a=y.toString();return a?"?"+a:d},set:function(b){null!==b&&void 0!==b&&(y=new a(b))}},searchParams:{enumerable:!0,configurable:!0,get:function(){return y},set:function(b){b instanceof a&&(y=b)}},hash:{enumerable:!0,configurable:!0,get:function(){return z||d},set:function(a){z=a?0===a.indexOf("#")?a:"#"+a:d}},href:{enumerable:!0,configurable:!0,get:function(){var a=[];return a.push(this.protocol+"//"),a.push(this.username),a.push(this.password&&":"+this.password),a.push((this.username||this.password)&&"@"),a.push(this.host),a.push(this.pathname),a.push(this.suffix),a.push(this.search),a.push(this.hash),a.join("")},set:function(a){a&&(p=m(a),n(p))}}}),o(),n(p)};return f.prototype.toString=function(){return this.href},f.prototype.toLocaleString=function(){return this.href},f});